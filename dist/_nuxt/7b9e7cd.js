(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1004:function(e,t,r){"use strict";r.r(t);r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=r(0),c=(r(7),r(51)),l=r(729),d=r(718),f=r(707),m=r(734),object=r(726);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={layout:"admin",components:{PageHeader:f.a,Select:l.a,Pagination:d.a},watchQuery:!0,asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,filter,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query,n=e.store,o={fromDate:null,toDate:null,status:null,searchKey:null,page:r.page||1},filter=v(v({},o),r),c=Object(object.a)(filter),t.next=6,n.dispatch("admin/product/fetch",c);case 6:return t.next=8,n.dispatch("admin/common/searchProductCates");case 8:return t.abrupt("return",{tableFilter:filter});case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{dialogForm:!1,dialogView:!1,productForm:null,productFormView:null,optionStatus:m.a,dateValue:void 0}},computed:v({},Object(c.d)("admin/product",["products","product","pagination"])),methods:{openForm:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==e){r.next=6;break}return r.next=3,t.$store.dispatch("admin/product/show",e);case 3:t.productForm=t.product,r.next=7;break;case 6:t.productForm=null;case 7:t.dialogForm=!0;case 8:case"end":return r.stop()}}),r)})))()},finishForm:function(data){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==data.id){t.next=5;break}return t.next=3,e.$store.dispatch("admin/product/update",{id:data.id,data:data});case 3:t.next=9;break;case 5:return t.next=7,e.$store.dispatch("admin/product/create",{data:data});case 7:return t.next=9,e.$store.dispatch("admin/product/fetch",e.tableFilter);case 9:e.dialogForm=!1;case 10:case"end":return t.stop()}}),t)})))()},fetchData:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var filter;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:filter=Object(object.a)(v(v(v({},t.$route.query),t.tableFilter),e)),t.$router.push({query:filter});case 2:case"end":return r.stop()}}),r)})))()},updatePage:function(e){this.fetchData({page:e})},updateSelect:function(e){this.fetchData({status:e,page:null})},updateSearchKey:function(){this.fetchData({page:null})},openView:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("admin/product/show",e);case 2:t.productFormView=t.product,t.dialogView=!0;case 4:case"end":return r.stop()}}),r)})))()},finishAddOrder:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.$store.dispatch("admin/orderProducer/addToOrder",e),t.dialogView=!1;case 2:case"end":return r.stop()}}),r)})))()}}},w=r(12),component=Object(w.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("PageHeader",{attrs:{title:"Báo cáo doanh thu"}}),e._v(" "),r("div",{staticClass:"w-full md:w-1/2"},[r("div",{staticClass:"mt-5 flex flex-wrap md:flex-nowrap"},[r("Select",{staticClass:"mr-5 mb-2",attrs:{options:e.optionStatus,placeholder:"Trạng thái",selected:e.$route.query.status},on:{changeValue:e.updateSelect}}),e._v(" "),r("el-input",{staticClass:"mr-5 mb-2",attrs:{placeholder:"Tìm kiếm",clearable:""},on:{clear:e.updateSearchKey},model:{value:e.tableFilter.searchKey,callback:function(t){e.$set(e.tableFilter,"searchKey",t)},expression:"tableFilter.searchKey"}}),e._v(" "),r("span",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.updateSearchKey}},[e._v("\n                    Tìm kiếm\n                ")])],1),e._v(" "),r("nuxt-link",{staticClass:"ml-3",attrs:{to:"/admin/product/create"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-plus"}},[e._v("\n                    Tạo mới\n                ")])],1)],1)]),e._v(" "),r("div",[r("el-table",{staticClass:"w-full",attrs:{data:e.dataTable,stripe:""}},[r("el-table-column",{attrs:{prop:"name",label:"Tên",fixed:"left","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"cursor-pointer",on:{click:function(r){return e.$emit("viewProductId",t.row.id)}}},[r("div",[r("img",{staticClass:"w-24 mb-2 m-auto",attrs:{src:t.row.avatar}})]),e._v(" "),r("p",{staticClass:"break-normal font-bold"},[e._v("\n                            "+e._s(t.row.name)+"\n                        ")])])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"Giá"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.promotionPrice>0?r("div",[r("div",{staticClass:"line-through text-gray-400"},[e._v("\n                            "+e._s(e._f("formatNumber")(t.row.price||0))+"\n                        ")]),e._v(" "),r("div",[e._v(e._s(e._f("formatNumber")(t.row.promotionPrice||0)))])]):r("div",[r("div",[e._v("\n                            "+e._s(e._f("formatNumber")(t.row.price||0))+"\n                        ")])])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"totalView",label:"Lượt xem"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("formatNumber")(t.row.totalView||0)))])]}}])})],1)],1),e._v(" "),r("div",[r("Pagination",{attrs:{"page-size":e.pagination.pageSize,total:e.pagination.total,"current-page":e.pagination.page},on:{changePage:e.updatePage}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},707:function(e,t,r){"use strict";var n={props:{title:{type:String,require:!0},activeName:{type:String,require:!0}},methods:{goBack:function(){this.$router.go(-1)}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-page-header",{staticClass:"mb-5",attrs:{content:e.title},on:{back:e.goBack}})}),[],!1,null,null,null);t.a=component.exports},709:function(e,t,r){var n=r(265),o=r(259),c=r(710),l=r(261),d=r(114),f=r(713),m=r(263),h=r(407),v=m((function(object,e){var t={};if(null==object)return t;var r=!1;e=n(e,(function(path){return path=l(path,object),r||(r=path.length>1),path})),d(object,h(object),t),r&&(t=o(t,7,f));for(var m=e.length;m--;)c(t,e[m]);return t}));e.exports=v},710:function(e,t,r){var n=r(261),o=r(711),c=r(712),l=r(94);e.exports=function(object,path){return path=n(path,object),null==(object=c(object,path))||delete object[l(o(path))]}},711:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},712:function(e,t,r){var n=r(262),o=r(409);e.exports=function(object,path){return path.length<2?object:n(object,o(path,0,-1))}},713:function(e,t,r){var n=r(408);e.exports=function(e){return n(e)?void 0:e}},714:function(e,t,r){var n=r(264),o=r(114),c=r(715),l=r(260),d=r(172),f=r(95),m=Object.prototype.hasOwnProperty,h=c((function(object,source){if(d(source)||l(source))o(source,f(source),object);else for(var e in source)m.call(source,e)&&n(object,e,source[e])}));e.exports=h},715:function(e,t,r){var n=r(716),o=r(717);e.exports=function(e){return n((function(object,t){var r=-1,n=t.length,c=n>1?t[n-1]:void 0,l=n>2?t[2]:void 0;for(c=e.length>3&&"function"==typeof c?(n--,c):void 0,l&&o(t[0],t[1],l)&&(c=n<3?void 0:c,n=1),object=Object(object);++r<n;){var source=t[r];source&&e(object,source,r,c)}return object}))}},716:function(e,t,r){var n=r(170),o=r(406),c=r(266);e.exports=function(e,t){return c(o(e,t,n),e+"")}},717:function(e,t,r){var n=r(173),o=r(260),c=r(171),l=r(61);e.exports=function(e,t,object){if(!l(object))return!1;var r=typeof t;return!!("number"==r?o(object)&&c(t,object.length):"string"==r&&t in object)&&n(object[t],e)}},718:function(e,t,r){"use strict";var n=r(6),o=(r(404),r(709)),c=r.n(o),l=r(714),d=r.n(l),f={props:{pageSize:{type:Number,default:12},pagerCount:{type:Number,default:7},total:{type:Number,require:!0},currentPage:{type:Number,default:1},queryParam:{type:String,default:"page"}},methods:{go:function(e){this.$emit("changePage",e),this.$router.push(this.to(e))},to:function(e){var path=this.$route.path,t=c()(this.$route.query,[this.queryParam]);return{path:path,query:1!==e?d()({},t,Object(n.a)({},this.queryParam,e)):t}}}},m=r(12),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.total>1?r("el-pagination",{staticClass:"text-center mt-5",attrs:{"page-size":e.pageSize,"pager-count":e.pagerCount,total:e.total,"current-page":e.currentPage,background:"",layout:"prev, pager, next"},on:{"current-change":e.go}}):e._e()],1)}),[],!1,null,null,null);t.a=component.exports},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(6);r(15),r(17),r(13),r(19),r(14),r(20);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l=function(e){return Object.keys(e).filter((function(t){return null!=e[t]&&""!==e[t]})).reduce((function(a,t){return c(c({},a),{},Object(n.a)({},t,e[t]))}),{})}},729:function(e,t,r){"use strict";var n={props:{options:{type:[Array,Object],require:!0},placeholder:{type:String,require:!1},selected:{type:String,require:!1},disabled:{type:Boolean,default:!1}},data:function(){return{value:this.selected||""}},methods:{updateValue:function(){this.$emit("changeValue",this.value)}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",{staticClass:"w-full",attrs:{clearable:"",placeholder:e.placeholder||"Lựa chọn",disabled:e.disabled},on:{change:e.updateValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return r("el-option",{key:e.slug,attrs:{label:e.label,value:e.slug}})})),1)}),[],!1,null,null,null);t.a=component.exports},734:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={PUBLISH:{label:"Hiện",slug:"publish"},DRAFT:{label:"Ẩn",slug:"draft"}}}}]);