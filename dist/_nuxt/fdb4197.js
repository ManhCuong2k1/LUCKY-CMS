(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{706:function(e,t,n){var r=n(259);e.exports=function(e){return r(e,5)}},707:function(e,t,n){"use strict";var r={props:{title:{type:String,require:!0},activeName:{type:String,require:!0}},methods:{goBack:function(){this.$router.go(-1)}}},o=n(12),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-page-header",{staticClass:"mb-5",attrs:{content:e.title},on:{back:e.goBack}})}),[],!1,null,null,null);t.a=component.exports},709:function(e,t,n){var r=n(265),o=n(259),c=n(710),l=n(261),d=n(114),f=n(713),h=n(263),m=n(407),v=h((function(object,e){var t={};if(null==object)return t;var n=!1;e=r(e,(function(path){return path=l(path,object),n||(n=path.length>1),path})),d(object,m(object),t),n&&(t=o(t,7,f));for(var h=e.length;h--;)c(t,e[h]);return t}));e.exports=v},710:function(e,t,n){var r=n(261),o=n(711),c=n(712),l=n(94);e.exports=function(object,path){return path=r(path,object),null==(object=c(object,path))||delete object[l(o(path))]}},711:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},712:function(e,t,n){var r=n(262),o=n(409);e.exports=function(object,path){return path.length<2?object:r(object,o(path,0,-1))}},713:function(e,t,n){var r=n(408);e.exports=function(e){return r(e)?void 0:e}},714:function(e,t,n){var r=n(264),o=n(114),c=n(715),l=n(260),d=n(172),f=n(95),h=Object.prototype.hasOwnProperty,m=c((function(object,source){if(d(source)||l(source))o(source,f(source),object);else for(var e in source)h.call(source,e)&&r(object,e,source[e])}));e.exports=m},715:function(e,t,n){var r=n(716),o=n(717);e.exports=function(e){return r((function(object,t){var n=-1,r=t.length,c=r>1?t[r-1]:void 0,l=r>2?t[2]:void 0;for(c=e.length>3&&"function"==typeof c?(r--,c):void 0,l&&o(t[0],t[1],l)&&(c=r<3?void 0:c,r=1),object=Object(object);++n<r;){var source=t[n];source&&e(object,source,n,c)}return object}))}},716:function(e,t,n){var r=n(170),o=n(406),c=n(266);e.exports=function(e,t){return c(o(e,t,r),e+"")}},717:function(e,t,n){var r=n(173),o=n(260),c=n(171),l=n(61);e.exports=function(e,t,object){if(!l(object))return!1;var n=typeof t;return!!("number"==n?o(object)&&c(t,object.length):"string"==n&&t in object)&&r(object[t],e)}},718:function(e,t,n){"use strict";var r=n(6),o=(n(404),n(709)),c=n.n(o),l=n(714),d=n.n(l),f={props:{pageSize:{type:Number,default:12},pagerCount:{type:Number,default:7},total:{type:Number,require:!0},currentPage:{type:Number,default:1},queryParam:{type:String,default:"page"}},methods:{go:function(e){this.$emit("changePage",e),this.$router.push(this.to(e))},to:function(e){var path=this.$route.path,t=c()(this.$route.query,[this.queryParam]);return{path:path,query:1!==e?d()({},t,Object(r.a)({},this.queryParam,e)):t}}}},h=n(12),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.total>1?n("el-pagination",{staticClass:"text-center mt-5",attrs:{"page-size":e.pageSize,"pager-count":e.pagerCount,total:e.total,"current-page":e.currentPage,background:"",layout:"prev, pager, next"},on:{"current-change":e.go}}):e._e()],1)}),[],!1,null,null,null);t.a=component.exports},727:function(e,t,n){"use strict";var r={props:{selectedRange:{type:Array,require:!1}},data:function(){return{pickerOptions:{shortcuts:[{text:"Tuần trước",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"Tháng trước",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"3 tháng",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},dateValue:this.selectedRange||[]}},methods:{updateDateRange:function(){this.$emit("changeDateRange",this.dateValue)}}},o=n(12),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"To","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc","picker-options":e.pickerOptions,format:"dd-MM-yyyy"},on:{change:e.updateDateRange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})}),[],!1,null,null,null);t.a=component.exports},898:function(e,t,n){},930:function(e,t,n){"use strict";n(898)},971:function(e,t,n){"use strict";n.r(t);n(17),n(13),n(15),n(19),n(14),n(20);var r=n(6),o=n(0),c=(n(7),n(51)),l=n(21),d=n(702),f=n(727),h=(n(62),n(706)),m=n.n(h);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={components:{},props:{data:{type:Array,require:!0}},data:function(){return{dataTable:m()(this.data),loadding:!1}},computed:y({},Object(c.d)("admin/news",["new"])),watch:{data:{handler:function(){this.dataTable=m()(this.data)},deep:!0}},methods:{switchDeleteNews:function(e,t){var n=this;null===t?this.$confirm("Bạn sẽ xóa bản ghi này ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){n.actionDeleteNews(e),n.$message({type:"success",message:"Xóa thành công"})})).catch((function(){n.$message({type:"info",message:"Đã hủy"})})):(this.actionRestoreNews(e),this.$message({type:"success",message:"Khôi phục thành công"}))},actionDeleteNews:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("admin/news/delete",{id:e});case 2:r=t.new,o=Object(l.findIndex)(t.dataTable,{id:e}),t.dataTable.splice(o,1,y(y({},o),r.data));case 5:case"end":return n.stop()}}),n)})))()},actionRestoreNews:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("admin/news/restore",{id:e});case 2:r=t.new,o=Object(l.findIndex)(t.dataTable,{id:e}),t.dataTable.splice(o,1,y(y({},o),r.data));case 5:case"end":return n.stop()}}),n)})))()}}},O=n(12),j=Object(O.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticClass:"w-full",attrs:{data:e.dataTable}},[n("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"Tiêu đề","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"summary",label:"Nội dung ngắn","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"text-line-2"},[e._v(e._s(t.row.summary))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"categories",label:"Danh mục"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.newsCategories,(function(t){return n("div",{key:t.title},[n("span",[e._v(e._s(t.title))])])}))}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Ngày tạo",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("formatDate")(t.row.createdAt)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Hành động",fixed:"right",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:null==t.row.deletedAt?"":"danger",icon:"el-icon-remove-outline"},on:{click:function(n){return e.switchDeleteNews(t.row.id,t.row.deletedAt)}}}),e._v(" "),n("div",{staticClass:"inline-block"},[n("router-link",{attrs:{to:"/admin/news/"+t.row.id+"/edit"}},[n("el-button",{attrs:{icon:"el-icon-edit"}})],1)],1)]}}])})],1)],1)}),[],!1,null,null,null).exports,D=n(718);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={layout:"admin",components:{TableNews:j,PageHeader:n(707).a,Pagination:D.a,DateRange:f.a},watchQuery:!0,asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,filter,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,r=e.store,o={fromDate:null,toDate:null,status:null,searchKey:null,page:n.page||1},filter=x(x({},o),n),c=Object(l.omitBy)(filter,l.isNull),t.next=6,r.dispatch("admin/news/fetch",c);case 6:return t.abrupt("return",{tableFilter:filter});case 7:case"end":return t.stop()}}),t)})))()},data:function(){return{dateValue:void 0}},computed:x({},Object(c.d)("admin/news",["news","new","pagination"])),methods:{fetchData:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var filter;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:filter=Object(l.omitBy)(x(x(x({},t.$route.query),t.tableFilter),e),l.isNull),t.$router.push({query:filter});case 2:case"end":return n.stop()}}),n)})))()},updatePage:function(e){this.fetchData({page:e})},updateDaterange:function(e){var t=null,n=null;null!==e&&(t=Object(d.a)(new Date(e[0]),"yyyy-MM-dd"),n=Object(d.a)(new Date(e[1]),"yyyy-MM-dd")),this.fetchData({fromDate:t,toDate:n,page:null})},updateSelect:function(e){this.fetchData({status:e,page:null})},updateSearchKey:function(){this.fetchData({page:null})}}},P=(n(930),Object(O.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("PageHeader",{attrs:{title:"Bài viết"}}),e._v(" "),n("div",{staticClass:"w-1/2"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"mr-5"},[n("DateRange",{attrs:{"selected-range":[e.$route.query.fromDate,e.$route.query.toDate]},on:{changeDateRange:e.updateDaterange}})],1)]),e._v(" "),n("div",{staticClass:"mt-5 flex"},[n("el-input",{staticClass:"input-with-select mr-5",attrs:{placeholder:"Tìm kiếm",clearable:""},on:{clear:e.updateSearchKey},model:{value:e.tableFilter.searchKey,callback:function(t){e.$set(e.tableFilter,"searchKey",t)},expression:"tableFilter.searchKey"}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.updateSearchKey}},[e._v("\n                Tìm kiếm\n            ")]),e._v(" "),n("nuxt-link",{staticClass:"ml-3",attrs:{to:"/admin/news/create"}},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus"}},[e._v("\n                    Tạo mới\n                ")])],1)],1)]),e._v(" "),n("div",[n("TableNews",{attrs:{data:e.news}})],1),e._v(" "),n("div",[n("Pagination",{attrs:{"page-size":e.pagination.pageSize,total:e.pagination.total,"current-page":e.pagination.page},on:{changePage:e.updatePage}}),e._v(" "),n("Pagination",{on:{changePage:e.updatePage}})],1)],1)}),[],!1,null,null,null));t.default=P.exports}}]);