(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{706:function(e,t,r){var n=r(259);e.exports=function(e){return n(e,5)}},707:function(e,t,r){"use strict";var n={props:{title:{type:String,require:!0},activeName:{type:String,require:!0}},methods:{goBack:function(){this.$router.go(-1)}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-page-header",{staticClass:"mb-5",attrs:{content:e.title},on:{back:e.goBack}})}),[],!1,null,null,null);t.a=component.exports},708:function(e,t,r){"use strict";r.d(t,"a",(function(){return image}));r(93),r(77),r(115),"".concat(window.location.protocol,"//").concat(window.location.host);function image(e,t){return e&&!e.includes("http")?t?"".concat("http://web.lc:8000/","/").concat(t,"/").concat(e):"".concat("http://web.lc:8000/","/").concat(e):e}},728:function(e,t,r){},730:function(e,t,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(404),r(51)),l=r(733),c=r(708);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={components:{Dropzone:l.a},props:{orderId:{type:Number,required:!0}},data:function(){return this.fetchData(this.orderId),{selectedFile:[],dialogVisible:!1,dialogImageUrl:!1,formError:[],pagination:null,namespaced:!0}},computed:f({},Object(o.d)("admin/image",["images"])),methods:f(f({toImage:c.a},Object(o.b)("admin/image",["fetchData"])),{},{onUploadSucceeded:function(e){this.fetchData(this.orderId),this.formError=[],this.$refs.dropzone.$_dropzone.removeFile(e)},updateUploadFiles:function(){this.selectedFile=this.$refs.upload.uploadFiles},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},confirmPick:function(e){this.$emit("confirmPick",e)}})},h=r(12),component=Object(h.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-wrapper w-full"},[r("Dropzone",{ref:"dropzone",staticClass:"mb-5",on:{success:e.onUploadSucceeded}}),e._v(" "),r("div",{staticClass:"w-full"},[0!=e.images.lenght?r("div",{},[r("div",{staticClass:"flex justify-start flex-wrap"},e._l(e.images,(function(i){return r("div",{key:i.id,staticClass:"md:w-1/6 p-2"},[r("img",{staticClass:"w-full transform transition duration-300 hover:scale-110 hover:shadow-md cursor-pointer",attrs:{src:e.toImage(i.imageUrl,"thumbnail")},on:{click:function(t){return e.confirmPick(i.imageUrl)}}})])})),0)]):r("div",[r("h3",{staticClass:"text-center"},[e._v("\n                Không có ảnh trong thư mục của bạn "+e._s(e.images.array)+"\n            ")])])])],1)}),[],!1,null,null,null);t.a=component.exports},731:function(e,t,r){"use strict";r.r(t),r.d(t,"createDropzone",(function(){return d}));r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=r(737),l=r.n(o);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}l.a.autoDiscover=!1;var d=function(e,t,r){return new l.a(e,function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({url:"/api/upload/single-upload",acceptedFiles:"image/jpeg,image/png,image/gif",maxFiles:5,maxFilesize:6,headers:{Authorization:r}},t))}},732:function(e,t,r){"use strict";r(728)},733:function(e,t,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(404),r(736)),l=r.n(o);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{url:{type:String,default:"/api/upload/single-upload"},method:{type:String,default:"post"},clickable:{type:Boolean,default:!0},acceptedFiles:{type:String,default:"image/jpeg,image/png,image/gif"},thumbnailHeight:{type:Number,default:200},thumbnailWidth:{type:Number,default:200},addRemoveLinks:{type:Boolean,default:!0},maxFilesize:{type:Number,default:6},maxFiles:{type:Number,default:5},autoProcessQueue:{type:Boolean,default:!0},parallelUploads:{type:Number,default:2},params:{type:Function,default:function(){}},uploadMultiple:Boolean},data:function(){return{dropzoneOptions:d(d({},l()(this.$props,["url","method","params","maxFiles","maxFilesize","acceptedFiles","parallelUploads","uploadMultiple","autoProcessQueue","clickable","thumbnailWidth","thumbnailHeight","addRemoveLinks"])),{},{dictRemoveFile:"Remove",dictDefaultMessage:'<i class="el-icon-upload fa-3x" aria-hidden="true"></i><br>Drag and drop files here or click to upload',previewTemplate:'<div class="dz-preview dz-file-preview">\n                        <div class="dz__image">\n                            <img data-dz-thumbnail alt=""/>\n                            <div class="dz__upload-status">\n                                <div class="dz__upload-status__success"><i class="fa fa-check"></i></div>\n                                <div class="dz__upload-status__error"><i class="fa fa-times"></i></div>\n                            </div>\n                        </div>\n                        <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n                        <div class="dz-details">\n                            <div class="dz-filename"><span data-dz-name></span></div>\n                            <div class="dz-size" data-dz-size></div>\n                        </div>\n                    </div>',headers:{Authorization:this.$auth.strategy.token.get()}})}},mounted:function(){var e=this;if(!this.$isServer&&!this.$_dropzone){var t=r(731).createDropzone;this.$_dropzone=t(this.$el,this.dropzoneOptions,this.$auth.strategy.token.get());["addedfile","removedfile","success","error","processing","sending"].forEach((function(t){e.$_dropzone.on(t,e.$emit.bind(e,t))}))}},beforeDestroy:function(){this.$_dropzone&&this.$_dropzone.destroy()}},m=(r(732),r(12)),component=Object(m.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-dropzone dropzone"})}),[],!1,null,null,null);t.a=component.exports},912:function(e,t,r){},945:function(e,t,r){"use strict";r(912)},983:function(e,t,r){"use strict";r.r(t);var n=r(0),o=(r(14),r(93),r(7),r(706)),l=r.n(o),c=r(730),d=r(708),f={id:"",name:"",type:"",orderDetail:"",periodNumber:"",status:"",images:[]},m={components:{ImageFinder:c.a},props:{luckyData:{type:Object,required:!1},orderDetails:{type:Array,required:!0}},data:function(){return{dialogGallery1:!1,dialogGallery2:!1,loading:!1,luckyForm:this.luckyData?l()(this.luckyData):l()(f)}},methods:{toImage:d.a,openLuckyGallery:function(){this.dialogGallery1=!0},confirmPick:function(e){this.dialogGallery1=!1,this.luckyForm.avatar=e}}},h=(r(945),r(12)),v={layout:"admin",components:{LuckyForm:Object(h.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"luckyForm",staticClass:"w-full",attrs:{model:e.luckyForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"Mã vé",prop:"id"}},[r("el-col",{staticClass:"order-detail",attrs:{span:12}},[r("p",[e._v(e._s(e.luckyForm.id))])])],1),e._v(" "),r("el-form-item",{attrs:{label:"Khách hàng",prop:""}},[r("el-col",{staticClass:"order-detail",attrs:{span:12}},[r("p",[e._v(e._s(e.luckyForm.user.phone))])])],1),e._v(" "),r("el-form-item",{attrs:{label:"Loại vé",prop:""}},[r("el-col",{staticClass:"order-detail",attrs:{span:6}},[r("p",[e._v(e._s(e.luckyForm.type))])])],1),e._v(" "),r("el-form-item",{attrs:{label:"Nội dung",prop:"LuckyCategoryId"}},[r("el-col",{staticClass:"order-detail pb-4",attrs:{span:12}},e._l(e.orderDetails,(function(t){return r("span",{key:t,staticClass:"block h-6"},[e._v("\n                    "+e._s(t)+"\n                ")])})),0)],1),e._v(" "),r("el-form-item",{attrs:{label:"Số kỳ",prop:"LuckyCategoryId"}},[r("el-col",{staticClass:"order-detail",attrs:{span:12}},[r("p",[e._v(e._s(e.luckyForm.orders.length))])])],1),e._v(" "),r("el-form-item",{attrs:{label:"Trạng thái",prop:"status"}},[r("el-col",{staticClass:"order-detail",attrs:{span:12}},[r("p",[e._v(e._s(e.luckyForm.orderStatus))])])],1),e._v(" "),r("el-form-item",{staticClass:"content-center",attrs:{label:"Lấy ảnh vé",size:"small"}},[r("el-button",{staticClass:"dropzone el-col-3",on:{click:e.openLuckyGallery}},[r("div",[r("div",[r("img",{staticClass:"w-32"})]),e._v(" "),r("span",{staticClass:"pd-0"},[r("i",{staticClass:"el-icon-camera-solid text-6xl text-gray-200"})])])]),e._v(" "),r("el-button",{staticClass:"dropzone el-col-3"},[r("div",[r("div",[r("img",{staticClass:"w-32"})]),e._v(" "),r("span",{staticClass:"pd-0"},[r("i",{staticClass:"el-icon-camera-solid text-6xl text-gray-200"})])])])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"}},[e._v("\n                Lưu ảnh\n            ")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"Chọn ảnh",visible:e.dialogGallery1},on:{"update:visible":function(t){e.dialogGallery1=t}}},[r("ImageFinder",{attrs:{"order-id":e.luckyForm.id},on:{confirmPick:e.confirmPick}})],1),e._v(" "),r("el-dialog",{attrs:{title:"Chọn ảnh",visible:e.dialogGallery2},on:{"update:visible":function(t){e.dialogGallery2=t}}},[r("ImageFinder")],1)],1)}),[],!1,null,null,null).exports,PageHeader:r(707).a},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,n=e.params,t.next=3,r.dispatch("admin/orderLucky/getDetail",n.id);case 3:return o=l()(r.state.admin.orderLucky.order),t.abrupt("return",{lucky:o});case 5:case"end":return t.stop()}}),t)})))()},computed:{configString:function(){var data=JSON.parse(this.lucky.orders[0].orderDetail).data,e=[];return data.forEach((function(element){var t="".concat(element.number[0]," ").concat(element.number[1]);e.push("".concat(element.price,"K - ").concat(t))})),e}}},y=Object(h.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("PageHeader"),e._v(" "),r("LuckyForm",{attrs:{"lucky-data":e.lucky,"order-details":e.configString}})],1)}),[],!1,null,null,null);t.default=y.exports}}]);