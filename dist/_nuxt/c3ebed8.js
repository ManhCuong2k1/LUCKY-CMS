(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{706:function(e,t,r){var n=r(259);e.exports=function(e){return n(e,5)}},707:function(e,t,r){"use strict";var n={props:{title:{type:String,require:!0},activeName:{type:String,require:!0}},methods:{goBack:function(){this.$router.go(-1)}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-page-header",{staticClass:"mb-5",attrs:{content:e.title},on:{back:e.goBack}})}),[],!1,null,null,null);t.a=component.exports},708:function(e,t,r){"use strict";r.d(t,"a",(function(){return image}));r(93),r(77),r(115),"".concat(window.location.protocol,"//").concat(window.location.host);function image(e,t){return e&&!e.includes("http")?t?"".concat("http://web.lc:8000/","/").concat(t,"/").concat(e):"".concat("http://web.lc:8000/","/").concat(e):e}},728:function(e,t,r){},730:function(e,t,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(404),r(51)),c=r(733),l=r(708);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={components:{Dropzone:c.a},props:{orderId:{type:Number,required:!0}},data:function(){return this.fetchData(this.orderId),{selectedFile:[],dialogVisible:!1,dialogImageUrl:!1,formError:[],pagination:null,namespaced:!0}},computed:m({},Object(o.d)("admin/image",["images"])),methods:m(m({toImage:l.a},Object(o.b)("admin/image",["fetchData"])),{},{onUploadSucceeded:function(e){this.fetchData(this.orderId),this.formError=[],this.$refs.dropzone.$_dropzone.removeFile(e)},updateUploadFiles:function(){this.selectedFile=this.$refs.upload.uploadFiles},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},confirmPick:function(e){this.$emit("confirmPick",e)}})},h=r(12),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-wrapper w-full"},[r("Dropzone",{ref:"dropzone",staticClass:"mb-5",on:{success:e.onUploadSucceeded}}),e._v(" "),r("div",{staticClass:"w-full"},[0!=e.images.lenght?r("div",{},[r("div",{staticClass:"flex justify-start flex-wrap"},e._l(e.images,(function(i){return r("div",{key:i.id,staticClass:"md:w-1/6 p-2"},[r("img",{staticClass:"w-full transform transition duration-300 hover:scale-110 hover:shadow-md cursor-pointer",attrs:{src:e.toImage(i.imageUrl,"thumbnail")},on:{click:function(t){return e.confirmPick(i.imageUrl)}}})])})),0)]):r("div",[r("h3",{staticClass:"text-center"},[e._v("\n                Không có ảnh trong thư mục của bạn "+e._s(e.images.array)+"\n            ")])])])],1)}),[],!1,null,null,null);t.a=component.exports},731:function(e,t,r){"use strict";r.r(t),r.d(t,"createDropzone",(function(){return d}));r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=r(737),c=r.n(o);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}c.a.autoDiscover=!1;var d=function(e,t,r){return new c.a(e,function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({url:"/api/upload/single-upload",acceptedFiles:"image/jpeg,image/png,image/gif",maxFiles:5,maxFilesize:6,headers:{Authorization:r}},t))}},732:function(e,t,r){"use strict";r(728)},733:function(e,t,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(404),r(736)),c=r.n(o);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={props:{url:{type:String,default:"/api/upload/single-upload"},method:{type:String,default:"post"},clickable:{type:Boolean,default:!0},acceptedFiles:{type:String,default:"image/jpeg,image/png,image/gif"},thumbnailHeight:{type:Number,default:200},thumbnailWidth:{type:Number,default:200},addRemoveLinks:{type:Boolean,default:!0},maxFilesize:{type:Number,default:6},maxFiles:{type:Number,default:5},autoProcessQueue:{type:Boolean,default:!0},parallelUploads:{type:Number,default:2},params:{type:Function,default:function(){}},uploadMultiple:Boolean},data:function(){return{dropzoneOptions:d(d({},c()(this.$props,["url","method","params","maxFiles","maxFilesize","acceptedFiles","parallelUploads","uploadMultiple","autoProcessQueue","clickable","thumbnailWidth","thumbnailHeight","addRemoveLinks"])),{},{dictRemoveFile:"Remove",dictDefaultMessage:'<i class="el-icon-upload fa-3x" aria-hidden="true"></i><br>Drag and drop files here or click to upload',previewTemplate:'<div class="dz-preview dz-file-preview">\n                        <div class="dz__image">\n                            <img data-dz-thumbnail alt=""/>\n                            <div class="dz__upload-status">\n                                <div class="dz__upload-status__success"><i class="fa fa-check"></i></div>\n                                <div class="dz__upload-status__error"><i class="fa fa-times"></i></div>\n                            </div>\n                        </div>\n                        <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n                        <div class="dz-details">\n                            <div class="dz-filename"><span data-dz-name></span></div>\n                            <div class="dz-size" data-dz-size></div>\n                        </div>\n                    </div>',headers:{Authorization:this.$auth.strategy.token.get()}})}},mounted:function(){var e=this;if(!this.$isServer&&!this.$_dropzone){var t=r(731).createDropzone;this.$_dropzone=t(this.$el,this.dropzoneOptions,this.$auth.strategy.token.get());["addedfile","removedfile","success","error","processing","sending"].forEach((function(t){e.$_dropzone.on(t,e.$emit.bind(e,t))}))}},beforeDestroy:function(){this.$_dropzone&&this.$_dropzone.destroy()}},f=(r(732),r(12)),component=Object(f.a)(m,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-dropzone dropzone"})}),[],!1,null,null,null);t.a=component.exports},882:function(e,t,r){"use strict";var n=r(0),o=(r(7),r(40),r(93),r(706)),c=r.n(o),l=r(730),d=r(708),m={},f={components:{ImageFinder:l.a},props:{categoryData:{type:Object,required:!1},baseUrl:{type:String,require:!1,default:"/admin/search/category"}},data:function(){return{loading:!1,categoryForm:this.categoryData?c()(this.categoryData):c()(m),dialogVisible:!1,optionCate:this.categoryData?this.categoryData.name:[],rules:{name:[{required:!0,message:"Hãy nhập tên danh mục",trigger:"blur"},{min:1,max:300,message:"Độ dài nên từ 10 tới 300",trigger:"blur"}]}}},methods:{toImage:d.a,openGallery:function(){this.dialogVisible=!0},confirmPick:function(e){this.dialogVisible=!1,this.categoryForm.avatar=e},remoteCate:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(""===e){r.next=10;break}return t.loading=!0,r.next=4,t.$axios.$get("".concat(t.baseUrl,"/").concat(e));case 4:n=r.sent,o=n.data,t.loading=!1,t.optionCate=o,r.next=11;break;case 10:t.optionCate=[];case 11:case"end":return r.stop()}}),r)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.$emit("submitForm",t.categoryForm),e.next=5;break;case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()}}},h=r(12),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"categoryForm",staticClass:"w-full",attrs:{model:e.categoryForm,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"Tên danh mục",prop:"name"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"Tiêu đề"},model:{value:e.categoryForm.name,callback:function(t){e.$set(e.categoryForm,"name",t)},expression:"categoryForm.name"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Hình ảnh",prop:"avatar"}},[r("el-col",{attrs:{span:12}},[r("el-button",{on:{click:e.openGallery}},[e.categoryForm.avatar?r("div",[r("img",{staticClass:"w-32",attrs:{src:e.toImage(e.categoryForm.avatar,"thumbnail")}})]):r("span",[e._v("Bộ sưu tập")])]),e._v(" "),r("el-dialog",{attrs:{title:"Thư viện",visible:e.dialogVisible,width:"75%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("ImageFinder",{on:{confirmPick:e.confirmPick}})],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("categoryForm")}}},[e._v("\n                Lưu\n            ")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("categoryForm")}}},[e._v("\n                Làm mới\n            ")])],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports},995:function(e,t,r){"use strict";r.r(t);var n=r(0),o=(r(7),r(882)),c=r(707),l={layout:"admin",components:{CategoryForm:o.a,PageHeader:c.a},methods:{create:function(form){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("admin/productCategory/create",{data:form});case 4:e.$router.push("/admin/category"),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),e.$message.error(e.$constants.ERROR_MESSAGE.Default),t.t0;case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,7,11,14]])})))()}}},d=r(12),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("PageHeader",{attrs:{title:"Tạo danh mục mới"}}),e._v(" "),r("CategoryForm",{on:{submitForm:e.create}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);