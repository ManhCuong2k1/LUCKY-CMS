(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{709:function(t,e,r){var n=r(265),o=r(259),c=r(710),l=r(261),d=r(114),m=r(713),f=r(263),h=r(407),v=f((function(object,t){var e={};if(null==object)return e;var r=!1;t=n(t,(function(path){return path=l(path,object),r||(r=path.length>1),path})),d(object,h(object),e),r&&(e=o(e,7,m));for(var f=t.length;f--;)c(e,t[f]);return e}));t.exports=v},710:function(t,e,r){var n=r(261),o=r(711),c=r(712),l=r(94);t.exports=function(object,path){return path=n(path,object),null==(object=c(object,path))||delete object[l(o(path))]}},711:function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},712:function(t,e,r){var n=r(262),o=r(409);t.exports=function(object,path){return path.length<2?object:n(object,o(path,0,-1))}},713:function(t,e,r){var n=r(408);t.exports=function(t){return n(t)?void 0:t}},714:function(t,e,r){var n=r(264),o=r(114),c=r(715),l=r(260),d=r(172),m=r(95),f=Object.prototype.hasOwnProperty,h=c((function(object,source){if(d(source)||l(source))o(source,m(source),object);else for(var t in source)f.call(source,t)&&n(object,t,source[t])}));t.exports=h},715:function(t,e,r){var n=r(716),o=r(717);t.exports=function(t){return n((function(object,e){var r=-1,n=e.length,c=n>1?e[n-1]:void 0,l=n>2?e[2]:void 0;for(c=t.length>3&&"function"==typeof c?(n--,c):void 0,l&&o(e[0],e[1],l)&&(c=n<3?void 0:c,n=1),object=Object(object);++r<n;){var source=e[r];source&&t(object,source,r,c)}return object}))}},716:function(t,e,r){var n=r(170),o=r(406),c=r(266);t.exports=function(t,e){return c(o(t,e,n),t+"")}},717:function(t,e,r){var n=r(173),o=r(260),c=r(171),l=r(61);t.exports=function(t,e,object){if(!l(object))return!1;var r=typeof e;return!!("number"==r?o(object)&&c(e,object.length):"string"==r&&e in object)&&n(object[e],t)}},718:function(t,e,r){"use strict";var n=r(6),o=(r(404),r(709)),c=r.n(o),l=r(714),d=r.n(l),m={props:{pageSize:{type:Number,default:12},pagerCount:{type:Number,default:7},total:{type:Number,require:!0},currentPage:{type:Number,default:1},queryParam:{type:String,default:"page"}},methods:{go:function(t){this.$emit("changePage",t),this.$router.push(this.to(t))},to:function(t){var path=this.$route.path,e=c()(this.$route.query,[this.queryParam]);return{path:path,query:1!==t?d()({},e,Object(n.a)({},this.queryParam,t)):e}}}},f=r(12),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.total>1?r("el-pagination",{staticClass:"text-center mt-5",attrs:{"page-size":t.pageSize,"pager-count":t.pagerCount,total:t.total,"current-page":t.currentPage,background:"",layout:"prev, pager, next"},on:{"current-change":t.go}}):t._e()],1)}),[],!1,null,null,null);e.a=component.exports},719:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r(93),r(720),r(721),r(26),r(61);var n=function(t,e,r){e.length<t.min||e.length>t.max?r(new Error("Length should be ".concat(t.min," to ").concat(t.max))):r()}},720:function(t,e,r){var n=r(268),o=r(405),c=r(267);t.exports=function(object,t){var e={};return t=c(t,3),o(object,(function(r,o,object){n(e,o,t(r,o,object))})),e}},721:function(t,e,r){t.exports=r(722)},722:function(t,e,r){var n=r(174),o=r(723),c=r(725),l=r(26);t.exports=function(t,e){return(l(t)?n:o)(t,c(e))}},723:function(t,e,r){var n=r(405),o=r(724)(n);t.exports=o},724:function(t,e,r){var n=r(260);t.exports=function(t,e){return function(r,o){if(null==r)return r;if(!n(r))return t(r,o);for(var c=r.length,l=e?c:-1,d=Object(r);(e?l--:++l<c)&&!1!==o(d[l],l,d););return r}}},725:function(t,e,r){var n=r(170);t.exports=function(t){return"function"==typeof t?t:n}},726:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(6);r(15),r(17),r(13),r(19),r(14),r(20);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l=function(t){return Object.keys(t).filter((function(e){return null!=t[e]&&""!==t[e]})).reduce((function(a,e){return c(c({},a),{},Object(n.a)({},e,t[e]))}),{})}},729:function(t,e,r){"use strict";var n={props:{options:{type:[Array,Object],require:!0},placeholder:{type:String,require:!1},selected:{type:String,require:!1},disabled:{type:Boolean,default:!1}},data:function(){return{value:this.selected||""}},methods:{updateValue:function(){this.$emit("changeValue",this.value)}}},o=r(12),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-select",{staticClass:"w-full",attrs:{clearable:"",placeholder:t.placeholder||"Lựa chọn",disabled:t.disabled},on:{change:t.updateValue},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return r("el-option",{key:t.slug,attrs:{label:t.label,value:t.slug}})})),1)}),[],!1,null,null,null);e.a=component.exports},734:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n={PUBLISH:{label:"Hiện",slug:"publish"},DRAFT:{label:"Ẩn",slug:"draft"}}},739:function(t,e,r){"use strict";var n=r(8),o=r(78),c=r(740),l=r(410),d=r(11),m=1..toFixed,f=Math.floor,h=function(t,e,r){return 0===e?r:e%2==1?h(t,e-1,r*t):h(t*t,e/2,r)},v=function(data,t,e){for(var r=-1,n=e;++r<6;)n+=t*data[r],data[r]=n%1e7,n=f(n/1e7)},y=function(data,t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=f(r/t),r=r%t*1e7},O=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=String(data[t]);s=""===s?e:s+l.call("0",7-e.length)+e}return s};n({target:"Number",proto:!0,forced:m&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!d((function(){m.call({})}))},{toFixed:function(t){var e,r,n,d,m=c(this),f=o(t),data=[0,0,0,0,0,0],w="",P="0";if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(m!=m)return"NaN";if(m<=-1e21||m>=1e21)return String(m);if(m<0&&(w="-",m=-m),m>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(m*h(2,69,1))-69)<0?m*h(2,-e,1):m/h(2,e,1),r*=4503599627370496,(e=52-e)>0){for(v(data,0,r),n=f;n>=7;)v(data,1e7,0),n-=7;for(v(data,h(10,n,1),0),n=e-1;n>=23;)y(data,1<<23),n-=23;y(data,1<<n),v(data,1,1),y(data,2),P=O(data)}else v(data,0,r),v(data,1<<-e,0),P=O(data)+l.call("0",f);return P=f>0?w+((d=P.length)<=f?"0."+l.call("0",f-d)+P:P.slice(0,d-f)+"."+P.slice(d-f)):w+P}})},740:function(t,e,r){var n=r(69);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},741:function(t,e,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(62),r(63),r(117),r(51)),c=r(706),l=r.n(c),d=r(735),m=r(734),f=r(730),h=r(708),v=r(719),y=(r(404),r(18),r(175),r(68),r(739),r(411),{props:{value:{type:[String,Number],required:!1},placeholder:{type:String,required:!1}},data:function(){return{isInputActive:!1}},computed:{displayValue:{get:function(){return this.isInputActive?this.value.toString():"".concat(this.value.toFixed(0).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")," đ ")},set:function(t){var e=parseFloat(t.replace(/[^\d.]/g,""));Number.isNaN(e)&&(e=0),this.$emit("input",e)}}}}),O=r(12),w=Object(O.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-input",{attrs:{type:"text",placeholder:t.placeholder},on:{blur:function(e){t.isInputActive=!1},focus:function(e){t.isInputActive=!0}},model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}})],1)}),[],!1,null,null,null).exports,P={key:"",value:""},_={props:{data:{type:Array}},data:function(){return{listAtt:this.data.length?l()(this.data):l()([P])}},methods:{add:function(){this.listAtt.push(l()(P)),this.$emit("update:data",this.listAtt)},deleteRow:function(t){this.listAtt.splice(t,1)}}},x=Object(O.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.listAtt,(function(e,n){return r("div",{key:n,staticClass:"flex mb-2"},[r("span",{staticClass:"mr-3"},[r("el-input",{attrs:{placeholder:"Tên"},on:{change:function(e){return t.$emit("update:data",t.listAtt)}},model:{value:e.key,callback:function(r){t.$set(e,"key",r)},expression:"item.key"}})],1),t._v(" "),r("span",{staticClass:"mr-3"},[r("el-input",{attrs:{placeholder:"Giá trị"},on:{change:function(e){return t.$emit("update:data",t.listAtt)}},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"item.value"}})],1),t._v(" "),r("span",n?[r("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(e){return t.deleteRow(n)}}})]:[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){return t.add()}}})],1)])})),0)}),[],!1,null,null,null).exports;function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k={name:"",avatar:"",ProductCategoryId:"",status:"",content:"",price:0,promotionPrice:0,volumeUnit:"",volume:0,images:[],minPerOrder:null,maxPerOrder:null},C={components:{Tinymce:d.a,Currency:w,ImageFinder:f.a,Attributes:x},props:{productData:{type:Object,required:!1}},data:function(){var t=this.productData?l()(this.productData):l()(k);return{dialogGallery:!1,dialogProductGallery:!1,loading:!1,optionStatus:m.a,productForm:t,rules:{name:[{required:!0,message:"Vui lòng nhập tên",trigger:"blur"},{min:1,max:300,validator:v.a,trigger:"blur"}],ProductCategoryId:[{required:!0,message:"Vui lòng nhập danh mục sản phẩm",trigger:"blur"}],status:[{required:!0,message:"Vui lòng nhập trạng thái",trigger:"blur"}]}}},computed:j(j({},Object(o.d)("admin/common",["optionProductCates"])),{},{userLoged:function(){return this.$store.state.auth.user}}),watch:{productData:function(){this.productForm=this.productData?l()(this.productData):l()(k)}},methods:{toImage:h.a,openGallery:function(){this.dialogGallery=!0},openProductGallery:function(){this.dialogProductGallery=!0},deleteImage:function(t){var e=this.productForm.images.indexOf(t);this.productForm.images.splice(e,1)},ProductconfirmPick:function(t){this.dialogProductGallery=!1;var e={url:t,name:t.split("/")[1]};null===this.productForm.images&&(this.productForm.images=[]),this.productForm.images.push(e)},confirmPick:function(t){this.dialogGallery=!1,this.productForm.avatar=t},contentChange:function(content){this.productForm.content=content},handleSubmit:function(t,data){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message.error("Oops, Vui lòng nhập đầy đủ thông tin."),!1;e.$emit("finishForm",l()(data))}))},resetForm:function(t){this.$refs[t].resetFields()}}},$=Object(O.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form",{ref:"productForm",staticClass:"w-full",attrs:{model:t.productForm,"label-width":"120px",rules:t.rules}},[r("el-form-item",{attrs:{label:"Tên sản phẩm",prop:"name"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"Tên sản phẩm"},model:{value:t.productForm.name,callback:function(e){t.$set(t.productForm,"name",e)},expression:"productForm.name"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Ảnh đại diện",prop:"avatar"}},[r("el-col",{attrs:{span:12}},[r("el-button",{on:{click:t.openGallery}},[t.productForm.avatar?r("div",[r("img",{staticClass:"w-32",attrs:{src:t.toImage(t.productForm.avatar,"avatar")}})]):r("span",[t._v("Chọn ảnh đại diện")])])],1)],1),t._v(" "),r("el-form-item",{staticClass:"content-center",attrs:{label:"Ảnh sản phẩm",size:"small"}},[t._l(t.productForm.images,(function(image,e){return r("el-button",{key:e,on:{click:function(e){return t.deleteImage(image)}}},[t.productForm.images?r("div",[r("div",[r("img",{staticClass:"w-32",attrs:{src:t.toImage(image.url,"avatar")}})]),t._v(" "),r("span",{staticClass:"pd-0"},[r("i",{staticClass:"el-icon-delete"})])]):r("span",[t._v("Chọn ảnh sản phẩm")])])})),t._v(" "),r("el-button",{on:{click:t.openProductGallery}},[r("span",[t._v("Chọn ảnh sản phẩm")])])],2),t._v(" "),r("el-form-item",{attrs:{label:"Danh mục",prop:"ProductCategoryId"}},[r("el-col",{attrs:{span:24}},[r("el-select",{attrs:{filterable:"",placeholder:"Vui lòng nhập danh mục"},model:{value:t.productForm.ProductCategoryId,callback:function(e){t.$set(t.productForm,"ProductCategoryId",e)},expression:"productForm.ProductCategoryId"}},t._l(t.optionProductCates,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Trạng thái",prop:"status"}},[r("el-col",{attrs:{span:12}},[r("el-select",{attrs:{placeholder:"Trạng thái"},model:{value:t.productForm.status,callback:function(e){t.$set(t.productForm,"status",e)},expression:"productForm.status"}},t._l(t.optionStatus,(function(t){return r("el-option",{key:t.slug,attrs:{label:t.label,value:t.slug}})})),1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Giá",prop:"price"}},[r("el-col",{attrs:{span:12}},[r("Currency",{attrs:{placeholder:"Giá"},model:{value:t.productForm.price,callback:function(e){t.$set(t.productForm,"price",e)},expression:"productForm.price"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Giá khuyến mại",prop:"promotionPrice"}},[r("el-col",{attrs:{span:12}},[r("Currency",{attrs:{placeholder:"Giá khuyến mại"},model:{value:t.productForm.promotionPrice,callback:function(e){t.$set(t.productForm,"promotionPrice",e)},expression:"productForm.promotionPrice"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Đơn vị tính",prop:"volumeUnit"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"Đơn vị tính"},model:{value:t.productForm.volumeUnit,callback:function(e){t.$set(t.productForm,"volumeUnit",e)},expression:"productForm.volumeUnit"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Số lượng",prop:"volume"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{type:"number"},model:{value:t.productForm.volume,callback:function(e){t.$set(t.productForm,"volume",e)},expression:"productForm.volume"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Giới hạn",prop:"minmax"}},[r("el-col",{staticClass:"flex",attrs:{span:12}},[r("el-input",{attrs:{min:"0",type:"number"},model:{value:t.productForm.minPerOrder,callback:function(e){t.$set(t.productForm,"minPerOrder",e)},expression:"productForm.minPerOrder"}}),t._v(" "),r("span",{staticClass:"mx-3"},[t._v("đến")]),t._v(" "),r("el-input",{attrs:{min:"0",type:"number"},model:{value:t.productForm.maxPerOrder,callback:function(e){t.$set(t.productForm,"maxPerOrder",e)},expression:"productForm.maxPerOrder"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Thông tin sản phẩm"}},[r("Attributes",{attrs:{data:t.productForm.attributes},on:{"update:data":function(e){return t.$set(t.productForm,"attributes",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Mô tả",prop:"content"}},[r("el-col",{attrs:{span:24}},[r("Tinymce",{attrs:{content:t.productForm.content},on:{contentChange:t.contentChange}})],1)],1),t._v(" "),"admin"==t.userLoged.type?r("el-form-item",[null!=t.productData?r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("productForm",t.productForm)}}},[t._v("\n                Lưu\n            ")]):r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("productForm",t.productForm)}}},[t._v("\n                Tạo mới\n            ")])],1):t._e()],1),t._v(" "),r("el-dialog",{attrs:{title:"Chọn ảnh",visible:t.dialogGallery},on:{"update:visible":function(e){t.dialogGallery=e}}},[r("ImageFinder",{on:{confirmPick:t.confirmPick}})],1),t._v(" "),r("el-dialog",{attrs:{title:"Chọn ảnh",visible:t.dialogProductGallery},on:{"update:visible":function(e){t.dialogProductGallery=e}}},[r("ImageFinder",{on:{confirmPick:t.ProductconfirmPick}})],1)],1)}),[],!1,null,null,null);e.a=$.exports},905:function(t,e,r){},938:function(t,e,r){"use strict";r(905)},962:function(t,e,r){"use strict";r.r(e);r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=r(0),c=(r(7),r(51)),l=r(729),d=(r(62),r(21)),m=r(706),f=r.n(m),h=r(708);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O={components:{},props:{data:{type:Array,require:!0}},data:function(){return{dataTable:f()(this.data),loadding:!1}},computed:y({},Object(c.d)("admin/product",["product"])),watch:{data:{handler:function(){this.dataTable=f()(this.data)},deep:!0}},methods:{toImage:h.a,switchDeleteProduct:function(t,e){var r=this;null===e?this.$confirm("Bạn sẽ xóa bản ghi này ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){r.actionDeleteProduct(t),r.$message({type:"success",message:"Xóa thành công"})})).catch((function(){r.$message({type:"info",message:"Đã hủy xóa"})})):this.actionRestoreProduct(t)},actionDeleteProduct:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("admin/product/delete",{id:t});case 2:n=e.product,o=Object(d.findIndex)(e.dataTable,{id:t}),e.dataTable.splice(o,1,y(y({},o),n));case 5:case"end":return r.stop()}}),r)})))()},actionRestoreProduct:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("admin/product/restore",{id:t});case 2:n=e.product,o=Object(d.findIndex)(e.dataTable,{id:t}),e.dataTable.splice(o,1,y(y({},o),n));case 5:case"end":return r.stop()}}),r)})))()}}},w=r(12),P=Object(w.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-table",{staticClass:"w-full",attrs:{data:t.dataTable,stripe:""}},[r("el-table-column",{attrs:{prop:"name",label:"Tên",fixed:"left","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"cursor-pointer",on:{click:function(r){return t.$emit("viewProductId",e.row.id)}}},[r("div",[r("img",{staticClass:"w-24 mb-2 m-auto",attrs:{src:e.row.avatar}})]),t._v(" "),r("p",{staticClass:"break-normal font-bold text-center"},[t._v("\n                        "+t._s(e.row.name)+"\n                    ")])])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"price",label:"Giá"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.promotionPrice>0?r("div",[r("div",{staticClass:"line-through text-gray-400"},[t._v("\n                        "+t._s(t._f("formatNumber")(e.row.price||0))+"\n                    ")]),t._v(" "),r("div",[t._v(t._s(t._f("formatNumber")(e.row.promotionPrice||0)))])]):r("div",[r("div",[t._v("\n                        "+t._s(t._f("formatNumber")(e.row.price||0))+"\n                    ")])])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"volumeUnit",label:"Đơn vị"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.volumeUnit||"N/A"))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"volume",label:"Còn lại"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t._f("formatNumber")(e.row.volume||0)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button-group",[r("el-button",{attrs:{type:null===e.row.deletedAt?"":"danger",icon:"el-icon-delete"},on:{click:function(r){return t.switchDeleteProduct(e.row.id,e.row.deletedAt)}}}),t._v(" "),r("div",{staticClass:"inline-block"},[r("router-link",{attrs:{to:"/admin/product/"+e.row.id+"/edit"}},[r("el-button",{attrs:{icon:"el-icon-edit"}})],1)],1)],1)]}}])})],1)],1)}),[],!1,null,null,null).exports,_=r(718),x=r(707),F=r(741),j=r(734),k={components:{},props:{productData:{type:Object,required:!1}},data:function(){var t=f()(this.productData);return t.price=this.productData.price||0,t.promotionPrice=this.productData.promotionPrice||0,{dialogVisible:!1,loading:!1,optionStatus:j.a,productView:t,amount:1}},watch:{productData:function(){this.productView=f()(this.productData),this.productView.price=this.productData.price||0,this.productView.promotionPrice=this.productData.promotionPrice||0}},methods:{toImage:h.a,openGallery:function(){this.dialogVisible=!0},confirmPick:function(t){this.dialogVisible=!1,this.productView.avatar=t},contentChange:function(content){this.productView.content=content},handleSubmit:function(){this.$emit("finishForm",{id:this.productView.id,amount:this.amount})},resetForm:function(t){this.$refs[t].resetFields()}}},C=Object(w.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"w-68"},[r("div",[r("img",{staticClass:"w-64 mb-5 m-auto",attrs:{src:t.toImage(t.productView.avatar,"full")}})]),t._v(" "),r("div",[r("span",{staticClass:"font-bold text-black text-lg mb-2"},[t._v(t._s(t.productView.name))])]),t._v(" "),r("div",[r("span",{staticClass:"text-gray-400"},[t._v(t._s(t.productView.volumeUnit))])]),t._v(" "),r("div",[t.productView.promotionPrice>0?r("div",[r("span",{staticClass:"font-bold text-lg  text-red-500"},[t._v(t._s(t._f("formatNumber")(t.productView.promotionPrice))+"đ")]),t._v(" "),r("span",{staticClass:"font-bold text-gray-300 line-through"},[t._v(t._s(t._f("formatNumber")(t.productView.price))+"đ")])]):t._e()]),t._v(" "),r("div",{staticClass:"mt-3 text-center"},[r("el-input-number",{staticClass:"mb-2",attrs:{min:1},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),null!=t.productData?r("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("\n                Thêm vào đơn\n            ")]):t._e()],1)])])}),[],!1,null,null,null).exports,object=r(726);function $(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S={layout:"admin",components:{PageHeader:x.a,Select:l.a,TableProduct:P,Pagination:_.a,ProductForm:F.a,ProductView:C},watchQuery:!0,asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,filter,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,n=t.store,o={fromDate:null,toDate:null,status:null,searchKey:null,page:r.page||1},filter=D(D({},o),r),c=Object(object.a)(filter),e.next=6,n.dispatch("admin/product/fetch",c);case 6:return e.next=8,n.dispatch("admin/common/searchProductCates");case 8:return e.abrupt("return",{tableFilter:filter});case 9:case"end":return e.stop()}}),e)})))()},data:function(){return{dialogForm:!1,dialogView:!1,productForm:null,productFormView:null,optionStatus:j.a,dateValue:void 0}},computed:D({},Object(c.d)("admin/product",["products","product","pagination"])),methods:{openForm:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==t){r.next=6;break}return r.next=3,e.$store.dispatch("admin/product/show",t);case 3:e.productForm=e.product,r.next=7;break;case 6:e.productForm=null;case 7:e.dialogForm=!0;case 8:case"end":return r.stop()}}),r)})))()},finishForm:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==data.id){e.next=5;break}return e.next=3,t.$store.dispatch("admin/product/update",{id:data.id,data:data});case 3:e.next=9;break;case 5:return e.next=7,t.$store.dispatch("admin/product/create",{data:data});case 7:return e.next=9,t.$store.dispatch("admin/product/fetch",t.tableFilter);case 9:t.dialogForm=!1;case 10:case"end":return e.stop()}}),e)})))()},fetchData:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var filter;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:filter=Object(object.a)(D(D(D({},e.$route.query),e.tableFilter),t)),e.$router.push({query:filter});case 2:case"end":return r.stop()}}),r)})))()},updatePage:function(t){this.fetchData({page:t})},updateSelect:function(t){this.fetchData({status:t,page:null})},updateSearchKey:function(){this.fetchData({page:null})},openView:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("admin/product/show",t);case 2:e.productFormView=e.product,e.dialogView=!0;case 4:case"end":return r.stop()}}),r)})))()},finishAddOrder:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.$store.dispatch("admin/orderProducer/addToOrder",t),e.dialogView=!1;case 2:case"end":return r.stop()}}),r)})))()}}},V=(r(938),Object(w.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("PageHeader",{attrs:{title:"Sản phẩm"}}),t._v(" "),r("div",{staticClass:"w-full md:w-1/2"},[r("div",{staticClass:"mt-5 flex flex-wrap md:flex-nowrap"},[r("Select",{staticClass:"mr-5 mb-2",attrs:{options:t.optionStatus,placeholder:"Hiển thị",selected:t.$route.query.status},on:{changeValue:t.updateSelect}}),t._v(" "),r("el-input",{staticClass:"mr-5 mb-2",attrs:{placeholder:"Tìm kiếm",clearable:""},on:{clear:t.updateSearchKey},model:{value:t.tableFilter.searchKey,callback:function(e){t.$set(t.tableFilter,"searchKey",e)},expression:"tableFilter.searchKey"}}),t._v(" "),r("span",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.updateSearchKey}},[t._v("\n                    Tìm kiếm\n                ")])],1),t._v(" "),r("nuxt-link",{staticClass:"ml-3",attrs:{to:"/admin/product/create"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-plus"}},[t._v("\n                    Tạo mới\n                ")])],1)],1)]),t._v(" "),r("div",[r("TableProduct",{attrs:{data:t.products},on:{editProductId:t.openForm,viewProductId:t.openView}})],1),t._v(" "),r("div",[r("Pagination",{attrs:{"page-size":t.pagination.pageSize,total:t.pagination.total,"current-page":t.pagination.page},on:{changePage:t.updatePage}})],1),t._v(" "),r("el-dialog",{attrs:{title:"Sản phẩm",visible:t.dialogForm,"destroy-on-close":!0},on:{"update:visible":function(e){t.dialogForm=e}}},[r("ProductForm",{attrs:{"product-data":t.productForm},on:{finishForm:t.finishForm}})],1),t._v(" "),r("el-dialog",{attrs:{title:"Xem sản phẩm",visible:t.dialogView,"destroy-on-close":!0,width:"25%","custom-class":"custom-dialogView"},on:{"update:visible":function(e){t.dialogView=e}}},[r("ProductView",{attrs:{"product-data":t.productFormView},on:{finishForm:t.finishAddOrder}})],1)],1)}),[],!1,null,null,null));e.default=V.exports}}]);