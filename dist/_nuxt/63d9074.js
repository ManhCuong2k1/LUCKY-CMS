(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{707:function(e,t,r){"use strict";var n={props:{title:{type:String,require:!0},activeName:{type:String,require:!0}},methods:{goBack:function(){this.$router.go(-1)}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-page-header",{staticClass:"mb-5",attrs:{content:e.title},on:{back:e.goBack}})}),[],!1,null,null,null);t.a=component.exports},708:function(e,t,r){"use strict";r.d(t,"a",(function(){return image}));r(93),r(77),r(115),"".concat(window.location.protocol,"//").concat(window.location.host);function image(e,t){return e&&!e.includes("http")?t?"".concat("http://web.lc:8000/","/").concat(t,"/").concat(e):"".concat("http://web.lc:8000/","/").concat(e):e}},728:function(e,t,r){},730:function(e,t,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(404),r(51)),c=r(733),l=r(708);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={components:{Dropzone:c.a},props:{orderId:{type:Number,required:!0}},data:function(){return this.fetchData(this.orderId),{selectedFile:[],dialogVisible:!1,dialogImageUrl:!1,formError:[],pagination:null,namespaced:!0}},computed:f({},Object(o.d)("admin/image",["images"])),methods:f(f({toImage:l.a},Object(o.b)("admin/image",["fetchData"])),{},{onUploadSucceeded:function(e){this.fetchData(this.orderId),this.formError=[],this.$refs.dropzone.$_dropzone.removeFile(e)},updateUploadFiles:function(){this.selectedFile=this.$refs.upload.uploadFiles},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},confirmPick:function(e){this.$emit("confirmPick",e)}})},h=r(12),component=Object(h.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-wrapper w-full"},[r("Dropzone",{ref:"dropzone",staticClass:"mb-5",on:{success:e.onUploadSucceeded}}),e._v(" "),r("div",{staticClass:"w-full"},[0!=e.images.lenght?r("div",{},[r("div",{staticClass:"flex justify-start flex-wrap"},e._l(e.images,(function(i){return r("div",{key:i.id,staticClass:"md:w-1/6 p-2"},[r("img",{staticClass:"w-full transform transition duration-300 hover:scale-110 hover:shadow-md cursor-pointer",attrs:{src:e.toImage(i.imageUrl,"thumbnail")},on:{click:function(t){return e.confirmPick(i.imageUrl)}}})])})),0)]):r("div",[r("h3",{staticClass:"text-center"},[e._v("\n                Không có ảnh trong thư mục của bạn "+e._s(e.images.array)+"\n            ")])])])],1)}),[],!1,null,null,null);t.a=component.exports},731:function(e,t,r){"use strict";r.r(t),r.d(t,"createDropzone",(function(){return d}));r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=r(737),c=r.n(o);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}c.a.autoDiscover=!1;var d=function(e,t,r){return new c.a(e,function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({url:"/api/upload/single-upload",acceptedFiles:"image/jpeg,image/png,image/gif",maxFiles:5,maxFilesize:6,headers:{Authorization:r}},t))}},732:function(e,t,r){"use strict";r(728)},733:function(e,t,r){"use strict";r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),o=(r(404),r(736)),c=r.n(o);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{url:{type:String,default:"/api/upload/single-upload"},method:{type:String,default:"post"},clickable:{type:Boolean,default:!0},acceptedFiles:{type:String,default:"image/jpeg,image/png,image/gif"},thumbnailHeight:{type:Number,default:200},thumbnailWidth:{type:Number,default:200},addRemoveLinks:{type:Boolean,default:!0},maxFilesize:{type:Number,default:6},maxFiles:{type:Number,default:5},autoProcessQueue:{type:Boolean,default:!0},parallelUploads:{type:Number,default:2},params:{type:Function,default:function(){}},uploadMultiple:Boolean},data:function(){return{dropzoneOptions:d(d({},c()(this.$props,["url","method","params","maxFiles","maxFilesize","acceptedFiles","parallelUploads","uploadMultiple","autoProcessQueue","clickable","thumbnailWidth","thumbnailHeight","addRemoveLinks"])),{},{dictRemoveFile:"Remove",dictDefaultMessage:'<i class="el-icon-upload fa-3x" aria-hidden="true"></i><br>Drag and drop files here or click to upload',previewTemplate:'<div class="dz-preview dz-file-preview">\n                        <div class="dz__image">\n                            <img data-dz-thumbnail alt=""/>\n                            <div class="dz__upload-status">\n                                <div class="dz__upload-status__success"><i class="fa fa-check"></i></div>\n                                <div class="dz__upload-status__error"><i class="fa fa-times"></i></div>\n                            </div>\n                        </div>\n                        <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n                        <div class="dz-details">\n                            <div class="dz-filename"><span data-dz-name></span></div>\n                            <div class="dz-size" data-dz-size></div>\n                        </div>\n                    </div>',headers:{Authorization:this.$auth.strategy.token.get()}})}},mounted:function(){var e=this;if(!this.$isServer&&!this.$_dropzone){var t=r(731).createDropzone;this.$_dropzone=t(this.$el,this.dropzoneOptions,this.$auth.strategy.token.get());["addedfile","removedfile","success","error","processing","sending"].forEach((function(t){e.$_dropzone.on(t,e.$emit.bind(e,t))}))}},beforeDestroy:function(){this.$_dropzone&&this.$_dropzone.destroy()}},m=(r(732),r(12)),component=Object(m.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-dropzone dropzone"})}),[],!1,null,null,null);t.a=component.exports},993:function(e,t,r){"use strict";r.r(t);var n=r(0),o=(r(62),r(7),r(921)),c=r.n(o),l=r(21),d=r(707),f=r(730),m=r(708),h=[{index:0,image:"",type:"home"}],v={layout:"admin",components:{PageHeader:d.a,draggable:c.a,ImageFinder:f.a},fetch:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,t.next=3,r.dispatch("admin/banner/fetch");case 3:case"end":return t.stop()}}),t)})))()},data:function(){var e=this.$store.state.admin.banner.bannersData;return{editRow:-1,dialogVisible:!1,tableData:e.length>0?Object(l.cloneDeep)(e):h}},watch:{},methods:{toImage:m.a,openGallery:function(e){this.dialogVisible=!0,this.editRow=e},confirmPick:function(e){this.dialogVisible=!1,this.tableData[this.editRow].image=e,this.editRow=-1},removeRow:function(e){this.tableData.splice(e,1)},add:function(){var e=this.tableData.length;this.tableData.push({index:e,image:"",type:"home"})},save:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("admin/banner/update",{banners:e.tableData});case 2:return t.next=4,e.$store.dispatch("admin/banner/fetch");case 4:case"end":return t.stop()}}),t)})))()}}},y=r(12),component=Object(y.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("PageHeader",{attrs:{title:"Ảnh bìa"}}),e._v(" "),r("div",{staticClass:"w-full"},[r("div",{staticClass:"py-3"},[r("el-button",{on:{click:e.add}},[e._v("\n                Thêm\n            ")]),e._v(" "),r("el-button",{attrs:{type:"success"},on:{click:e.save}},[e._v("\n                Lưu\n            ")])],1),e._v(" "),r("table",{staticClass:"w-full"},[e._m(0),e._v(" "),r("draggable",{attrs:{tag:"tbody"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}},e._l(e.tableData,(function(t,n){return r("tr",{key:t.index,staticClass:"border-b border-gray-200"},[r("td",{staticClass:"p-3",attrs:{scope:"row"}},[r("el-button",{on:{click:function(t){return e.openGallery(n)}}},[t.image?r("div",[r("img",{staticClass:"w-32",attrs:{src:e.toImage(t.image,"full")}})]):r("span",[e._v("Thư viện")])])],1),e._v(" "),r("td",{staticClass:"p-2",attrs:{scope:"row",width:"200"}},[r("div",{staticClass:"flex justify-center"},[r("el-button",{attrs:{icon:"el-icon-rank"}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.removeRow(n)}}})],1)])])})),0)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"Media",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("ImageFinder",{on:{confirmPick:e.confirmPick}})],1)],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",{staticClass:"border-b border-gray-200 text-gray-600"},[r("th",{staticClass:"p-3",attrs:{scope:"col"}},[e._v("\n                        Ảnh\n                    ")]),e._v(" "),r("th",{staticClass:"p-3",attrs:{scope:"col"}},[e._v("\n                        Hành động\n                    ")])])])}],!1,null,null,null);t.default=component.exports}}]);