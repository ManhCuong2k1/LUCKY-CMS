(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{706:function(t,e,r){var n=r(259);t.exports=function(t){return n(t,5)}},707:function(t,e,r){"use strict";var n={props:{title:{type:String,require:!0},activeName:{type:String,require:!0}},methods:{goBack:function(){this.$router.go(-1)}}},c=r(12),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-page-header",{staticClass:"mb-5",attrs:{content:t.title},on:{back:t.goBack}})}),[],!1,null,null,null);e.a=component.exports},709:function(t,e,r){var n=r(265),c=r(259),o=r(710),l=r(261),d=r(114),f=r(713),h=r(263),m=r(407),v=h((function(object,t){var e={};if(null==object)return e;var r=!1;t=n(t,(function(path){return path=l(path,object),r||(r=path.length>1),path})),d(object,m(object),e),r&&(e=c(e,7,f));for(var h=t.length;h--;)o(e,t[h]);return e}));t.exports=v},710:function(t,e,r){var n=r(261),c=r(711),o=r(712),l=r(94);t.exports=function(object,path){return path=n(path,object),null==(object=o(object,path))||delete object[l(c(path))]}},711:function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},712:function(t,e,r){var n=r(262),c=r(409);t.exports=function(object,path){return path.length<2?object:n(object,c(path,0,-1))}},713:function(t,e,r){var n=r(408);t.exports=function(t){return n(t)?void 0:t}},714:function(t,e,r){var n=r(264),c=r(114),o=r(715),l=r(260),d=r(172),f=r(95),h=Object.prototype.hasOwnProperty,m=o((function(object,source){if(d(source)||l(source))c(source,f(source),object);else for(var t in source)h.call(source,t)&&n(object,t,source[t])}));t.exports=m},715:function(t,e,r){var n=r(716),c=r(717);t.exports=function(t){return n((function(object,e){var r=-1,n=e.length,o=n>1?e[n-1]:void 0,l=n>2?e[2]:void 0;for(o=t.length>3&&"function"==typeof o?(n--,o):void 0,l&&c(e[0],e[1],l)&&(o=n<3?void 0:o,n=1),object=Object(object);++r<n;){var source=e[r];source&&t(object,source,r,o)}return object}))}},716:function(t,e,r){var n=r(170),c=r(406),o=r(266);t.exports=function(t,e){return o(c(t,e,n),t+"")}},717:function(t,e,r){var n=r(173),c=r(260),o=r(171),l=r(61);t.exports=function(t,e,object){if(!l(object))return!1;var r=typeof e;return!!("number"==r?c(object)&&o(e,object.length):"string"==r&&e in object)&&n(object[e],t)}},718:function(t,e,r){"use strict";var n=r(6),c=(r(404),r(709)),o=r.n(c),l=r(714),d=r.n(l),f={props:{pageSize:{type:Number,default:12},pagerCount:{type:Number,default:7},total:{type:Number,require:!0},currentPage:{type:Number,default:1},queryParam:{type:String,default:"page"}},methods:{go:function(t){this.$emit("changePage",t),this.$router.push(this.to(t))},to:function(t){var path=this.$route.path,e=o()(this.$route.query,[this.queryParam]);return{path:path,query:1!==t?d()({},e,Object(n.a)({},this.queryParam,t)):e}}}},h=r(12),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.total>1?r("el-pagination",{staticClass:"text-center mt-5",attrs:{"page-size":t.pageSize,"pager-count":t.pagerCount,total:t.total,"current-page":t.currentPage,background:"",layout:"prev, pager, next"},on:{"current-change":t.go}}):t._e()],1)}),[],!1,null,null,null);e.a=component.exports},726:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(6);r(15),r(17),r(13),r(19),r(14),r(20);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l=function(t){return Object.keys(t).filter((function(e){return null!=t[e]&&""!==t[e]})).reduce((function(a,e){return o(o({},a),{},Object(n.a)({},e,t[e]))}),{})}},727:function(t,e,r){"use strict";var n={props:{selectedRange:{type:Array,require:!1}},data:function(){return{pickerOptions:{shortcuts:[{text:"Tuần trước",onClick:function(t){var e=new Date,r=new Date;r.setTime(r.getTime()-6048e5),t.$emit("pick",[r,e])}},{text:"Tháng trước",onClick:function(t){var e=new Date,r=new Date;r.setTime(r.getTime()-2592e6),t.$emit("pick",[r,e])}},{text:"3 tháng",onClick:function(t){var e=new Date,r=new Date;r.setTime(r.getTime()-7776e6),t.$emit("pick",[r,e])}}]},dateValue:this.selectedRange||[]}},methods:{updateDateRange:function(){this.$emit("changeDateRange",this.dateValue)}}},c=r(12),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"To","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc","picker-options":t.pickerOptions,format:"dd-MM-yyyy"},on:{change:t.updateDateRange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})}),[],!1,null,null,null);e.a=component.exports},729:function(t,e,r){"use strict";var n={props:{options:{type:[Array,Object],require:!0},placeholder:{type:String,require:!1},selected:{type:String,require:!1},disabled:{type:Boolean,default:!1}},data:function(){return{value:this.selected||""}},methods:{updateValue:function(){this.$emit("changeValue",this.value)}}},c=r(12),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-select",{staticClass:"w-full",attrs:{clearable:"",placeholder:t.placeholder||"Lựa chọn",disabled:t.disabled},on:{change:t.updateValue},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return r("el-option",{key:t.slug,attrs:{label:t.label,value:t.slug}})})),1)}),[],!1,null,null,null);e.a=component.exports},879:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n={CREATED:{label:"Mới tạo",slug:"created"},PROCESSING:{label:"Đang xử lý",slug:"processing"},SHIPPING:{label:"Đang vận chuyển",slug:"shipping"},SUCCESS:{label:"Hoàn thành",slug:"success"},CANCELED:{label:"Hủy",slug:"canceled"}}},902:function(t,e,r){},934:function(t,e,r){"use strict";r(902)},974:function(t,e,r){"use strict";r.r(e);r(17),r(13),r(15),r(19),r(14),r(20);var n=r(6),c=r(0),o=(r(7),r(40),r(51)),l=r(702),d=r(727),f=r(729),h=(r(62),r(21)),m=r(706),v=r.n(m);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={props:{data:{type:Array,require:!0}},data:function(){return{dataTable:v()(this.data)}},watch:{data:{handler:function(){this.dataTable=v()(this.data)},deep:!0}},methods:{switchDeleteDistrictbutor:function(t,e){var r=this;null===e?this.$confirm("Bạn sẽ xóa bản ghi này ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){r.actionDeleteDistributor(t),r.$message({type:"success",message:"Xóa thành công"})})).catch((function(){r.$message({type:"info",message:"Đã hủy xóa"})})):this.actionRestoreDistributor(t)},actionDeleteDistributor:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("admin/distributor/delete",{id:t});case 2:n=e.distributorDelete,c=Object(h.findIndex)(e.dataTable,{id:t}),e.dataTable.splice(c,1,O(O({},c),n.data));case 5:case"end":return r.stop()}}),r)})))()},actionRestoreDistributor:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("admin/distributor/restore",{id:t});case 2:n=e.distributorRestore,c=Object(h.findIndex)(e.dataTable,{id:t}),e.dataTable.splice(c,1,O(O({},c),n.data));case 5:case"end":return r.stop()}}),r)})))()}}},w=r(12),D=Object(w.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-table",{staticClass:"w-full",attrs:{data:t.dataTable}},[r("el-table-column",{attrs:{fixed:"",prop:"code",label:"Mã đơn"}}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"Tên"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.Admin.name))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"city",label:"Khu vực"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.Admin.City.name)+", "+t._s(e.row.Admin.District.name))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"phone",label:"Điện thoại"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.Admin.phone))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"transporter",label:"Vận chuyển"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Transporter?r("span",[t._v(t._s(e.row.Transporter.name))]):r("span",[t._v(t._s(e.row.TransporterAnoy))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"total",label:"Tổng tiền"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticClass:"font-bold text-red-500"},[t._v(t._s(t._f("formatNumber")(e.row.total)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"status",label:"Trạng thái"},scopedSlots:t._u([{key:"default",fn:function(e){return["created"==e.row.status?r("span",{staticClass:"capitalize"},[t._v("Đã tạo")]):t._e(),t._v(" "),"processing"==e.row.status?r("span",{staticClass:"capitalize"},[t._v("Đang xử lý")]):t._e(),t._v(" "),"shipping"==e.row.status?r("span",{staticClass:"capitalize"},[t._v("Đang vận chuyển")]):t._e(),t._v(" "),"success"==e.row.status?r("span",{staticClass:"capitalize"},[t._v("Hoàn thành")]):t._e(),t._v(" "),"canceled"==e.row.status?r("span",{staticClass:"capitalize"},[t._v("Đã hủy")]):t._e()]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Ngày tạo | Ngày cập nhật"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(t._f("formatDate")(e.row.createdAt)))]),t._v(" "),r("div",[t._v(t._s(t._f("formatDate")(e.row.updatedAt)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Hành động",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[r("el-button",{attrs:{type:null==e.row.deletedAt?"":"danger",icon:"el-icon-delete"},on:{click:function(r){return t.switchDeleteDistrictbutor(e.row.id,e.row.deletedAt)}}})],1),t._v(" "),r("div",[r("nuxt-link",{attrs:{to:"/admin/order-producer/"+e.row.id+"/edit"}},[r("el-button",{attrs:{icon:"el-icon-edit"}})],1)],1)]}}])})],1)],1)}),[],!1,null,null,null).exports,j=r(718),x=r(707),object=r(726),P=r(879);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function S(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C={layout:"admin",components:{PageHeader:x.a,DateRange:d.a,Select:f.a,TableOrder:D,Pagination:j.a},watchQuery:!0,asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,c,o,filter,l,d,f,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,n=t.query,c=t.$axios,o={fromDate:null,toDate:null,city:null,district:null,searchKey:null,deletedAt:null,page:n.page||1},filter=S(S({},o),n),l=Object(object.a)(filter),e.next=6,r.dispatch("admin/orderProducer/fetch",l);case 6:return e.next=8,r.dispatch("admin/common/searchCities");case 8:return e.next=10,r.dispatch("admin/common/searchDistrics",{cityId:filter.city});case 10:return e.next=12,c.get("/admin/district/".concat(n.district));case 12:return d=e.sent,f=d.data.name,e.next=16,c.get("/admin/city/".concat(n.city));case 16:return h=e.sent,m=h.data.name,e.abrupt("return",{tableFilter:filter,districtIdLabel:f,cityIdLabel:m});case 19:case"end":return e.stop()}}),e)})))()},data:function(){return{dateValue:void 0,optionStatus:P.a,nameCity:null,districts:null}},computed:S(S(S({},Object(o.d)("admin/orderProducer",["orderProducers","pagination"])),Object(o.d)("admin/common",["optionCities"])),Object(o.d)("admin/common",["optionDistricts"])),methods:{fetchData:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var filter;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:filter=Object(object.a)(S(S(S({},e.$route.query),e.tableFilter),t)),e.$router.push({query:filter});case 2:case"end":return r.stop()}}),r)})))()},updatePage:function(t){this.fetchData({page:t})},updateSelectStatus:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.fetchData({status:t,page:null});case 1:case"end":return r.stop()}}),r)})))()},updateSelectCity:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("admin/common/searchDistrics",{cityId:t});case 2:e.fetchData({city:t,page:null});case 3:case"end":return r.stop()}}),r)})))()},updateSelectDistrict:function(t){this.selectedDistrict=t,this.fetchData({district:this.selectedDistrict,page:null})},updateDaterange:function(t){var e=null,r=null;null!==t&&(e=Object(l.a)(new Date(t[0]),"yyyy-MM-dd"),r=Object(l.a)(new Date(t[1]),"yyyy-MM-dd")),this.fetchData({fromDate:e,toDate:r,page:null})},updateSearchKey:function(){this.fetchData({page:null})}}},T=(r(934),Object(w.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("PageHeader",{attrs:{title:"Đơn hàng sản xuất"}}),t._v(" "),r("div",{staticClass:"w-full"},[r("div",{staticClass:"flex flex-wrap"},[r("div",{staticClass:"mr-5 mt-2"},[r("DateRange",{attrs:{"selected-range":[t.$route.query.fromDate,t.$route.query.toDate]},on:{changeDateRange:t.updateDaterange}})],1),t._v(" "),r("div",{staticClass:"mr-5 mt-2"},[r("Select",{attrs:{options:t.optionStatus,placeholder:"Trạng thái",selected:t.$route.query.status},on:{changeValue:t.updateSelectStatus}})],1),t._v(" "),r("div",{staticClass:"mr-5 mt-2"},[r("Select",{attrs:{options:t.optionCities,placeholder:"Thành Phố",selected:t.cityIdLabel},on:{changeValue:t.updateSelectCity}})],1),t._v(" "),r("div",{staticClass:"mr-5 mt-2"},[r("Select",{attrs:{options:t.optionDistricts,placeholder:"Quận huyện",selected:t.districtIdLabel},on:{changeValue:t.updateSelectDistrict}})],1),t._v(" "),r("div",{staticClass:"mr-5 mt-2"},[r("el-input",{attrs:{placeholder:"Tìm mã",clearable:""},model:{value:t.tableFilter.searchKey,callback:function(e){t.$set(t.tableFilter,"searchKey",e)},expression:"tableFilter.searchKey"}})],1),t._v(" "),r("div",{staticClass:"mr-5 mt-2"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.updateSearchKey}},[t._v("\n                    Tìm kiếm\n                ")])],1),t._v(" "),r("div",{staticClass:"mr-5 mt-2 hidden"},[r("nuxt-link",{attrs:{to:"/admin/orderProducer/create"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-plus"}},[t._v("\n                        Tạo mới\n                    ")])],1)],1)])]),t._v(" "),r("div",[r("TableOrder",{attrs:{data:t.orderProducers}})],1),t._v(" "),r("div",[r("Pagination",{attrs:{"page-size":t.pagination.pageSize,total:t.pagination.total,"current-page":t.pagination.page},on:{changePage:t.updatePage}})],1)],1)}),[],!1,null,null,null));e.default=T.exports}}]);